/* Workspace theme tokens */
:root {
  --brand: #3794ff;
  --brand-2: #569cd6;
  --surface-0: #1e1e1e;
  --surface-1: #222327;
  --surface-2: #2a2b30;
  --surface-3: #2f3036;
  --text: #f3f4f6;
  --muted: #9ea3b0;
  --ring: rgba(55, 148, 255, 0.45);
  --warn: #ffb454;
  --ok: #3aa675;
  --bad: #f14c4c;
  --radius: 14px;
  --shadow-1: 0 16px 32px rgba(0, 0, 0, 0.4);
  --shadow-2: 0 24px 48px rgba(0, 0, 0, 0.24);
  --gap: 14px;
  --sidebar-w: 260px;
  --card-pad-y: 14px;
  --table-row-pad-y: 14px;
  color-scheme: dark;
}

:root {
  --bg: var(--surface-0);
  --panel: var(--surface-2);
  --panel-2: var(--surface-1);
  --accent: var(--brand);
  --accent-2: var(--brand-2);
  --accent-3: #3aa675;
}

.neon-navbar .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(243,244,246,0.9)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 8h22M4 15h22M4 22h22'/%3e%3c/svg%3e");
}

.neon-body .list-group-item {
  background: var(--surface-1);
  color: var(--muted);
  border-color: #313238;
}

.neon-body .list-group-item-action:hover,
.neon-body .list-group-item-action:focus {
  background: rgba(55, 148, 255, 0.18);
  color: var(--text);
}

.neon-body .list-group-item.active {
  background: #2f3036;
  border-color: #3c3c3f;
  color: var(--text);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
}

.sidebar .list-group-item .rotate,
.neon-offcanvas .list-group-item .rotate {
  display: inline-block;
  transition: transform 0.2s ease;
}

.sidebar .list-group-item > a[aria-expanded="true"] .rotate,
.sidebar .list-group-item.active > a .rotate {
  transform: rotate(180deg);
}

.neon-card {
  border-radius: var(--radius);
}

.neon-card .card-body {
  padding-top: var(--card-pad-y);
  padding-bottom: var(--card-pad-y);
}

.form-control,
.form-select {
  background: var(--surface-1);
  border: 1px solid #3a3b40;
  color: var(--text);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

.form-control:focus,
.form-select:focus {
  box-shadow: 0 0 0 0.2rem rgba(55, 148, 255, 0.15);
  border-color: rgba(55, 148, 255, 0.6);
}

.form-control::placeholder {
  color: rgba(158, 163, 176, 0.5);
}

.input-group-text {
  background: var(--surface-2);
  border-color: #3a3b40;
  color: var(--muted);
}

.form-check-input {
  background-color: var(--surface-2);
  border-color: #4a4b52;
}

.form-check-input:focus {
  box-shadow: 0 0 0 0.2rem rgba(55, 148, 255, 0.22);
  border-color: rgba(55, 148, 255, 0.6);
}

.form-check-input:checked {
  background-color: rgba(55, 148, 255, 0.8);
  border-color: rgba(55, 148, 255, 0.7);
}

.form-check-label {
  color: var(--text);
}

.btn-outline-info {
  color: var(--muted);
  border-color: rgba(87, 124, 176, 0.6);
}

.btn-outline-info:hover {
  color: var(--text);
  background: rgba(87, 124, 176, 0.24);
  border-color: var(--brand);
}

.btn-outline-secondary {
  color: var(--muted);
  border-color: #3f4046;
}

.btn-outline-secondary:hover {
  color: var(--text);
  background: rgba(63, 64, 70, 0.8);
}

.btn-outline-warning {
  border-color: rgba(255, 180, 84, 0.6);
  color: #ffd8a0;
}

.btn-outline-warning:hover {
  background: rgba(255, 180, 84, 0.12);
  color: #fff;
}

.btn-outline-primary {
  color: rgba(87, 124, 176, 0.9);
  border-color: rgba(87, 124, 176, 0.6);
}

.btn-outline-primary:hover {
  color: var(--text);
  background: rgba(87, 124, 176, 0.24);
  border-color: var(--brand);
}

.btn-outline-danger {
  color: rgba(241, 76, 76, 0.85);
  border-color: rgba(241, 76, 76, 0.55);
}

.btn-outline-danger:hover {
  color: var(--text);
  background: rgba(241, 76, 76, 0.18);
  border-color: rgba(241, 76, 76, 0.7);
}

.btn-outline-success {
  color: rgba(58, 166, 117, 0.85);
  border-color: rgba(58, 166, 117, 0.55);
}

.btn-outline-success:hover {
  color: var(--text);
  background: rgba(58, 166, 117, 0.18);
  border-color: rgba(58, 166, 117, 0.7);
}

.btn-primary {
  background: linear-gradient(180deg, #3d8be6, #2e73c1);
  color: var(--text);
  border-color: #3578ca;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
}

.btn-primary:hover {
  background: linear-gradient(180deg, #4596f4, #337ed0);
  border-color: #3a84d7;
}

.btn-primary:focus {
  box-shadow: 0 0 0 0.2rem rgba(55, 148, 255, 0.25);
}

.btn-primary:disabled {
  background: rgba(63, 65, 72, 0.9);
  color: rgba(158, 163, 176, 0.65);
  border-color: rgba(63, 65, 72, 0.9);
  box-shadow: none;
}

.btn-secondary {
  background: #2f3036;
  color: var(--text);
  border-color: #3f4146;
}

.btn-secondary:hover {
  background: rgba(87, 124, 176, 0.18);
  border-color: rgba(87, 124, 176, 0.5);
}

.btn-secondary:focus {
  box-shadow: 0 0 0 0.2rem rgba(55, 148, 255, 0.18);
}

.btn-secondary:disabled {
  background: rgba(63, 65, 72, 0.92);
  color: rgba(158, 163, 176, 0.6);
  border-color: rgba(63, 65, 72, 0.9);
}

.btn-success {
  background: linear-gradient(180deg, #3aa675, #2e7f57);
  border-color: #2e7f57;
  color: var(--text);
}

.btn-success:hover {
  background: linear-gradient(180deg, #42b17f, #30865c);
  border-color: #2e7f57;
}

.btn-danger {
  background: linear-gradient(180deg, #f14c4c, #cc3e3e);
  border-color: #cc3e3e;
  color: var(--text);
}

.btn-danger:hover {
  background: linear-gradient(180deg, #ff5d5d, #d94242);
  border-color: #cc3e3e;
}

.btn-close {
  filter: invert(1) grayscale(100%);
  opacity: 0.75;
}

.btn-close:hover {
  opacity: 1;
}

.alert {
  background: rgba(46, 46, 51, 0.96);
  border-color: #3a3b40;
  color: var(--text);
  box-shadow: var(--shadow-1);
}

.alert-warning {
  border-color: rgba(255, 180, 84, 0.6);
  background: rgba(255, 180, 84, 0.12);
  color: #ffe8c0;
}

.alert-success {
  border-color: rgba(58, 166, 117, 0.6);
  background: rgba(58, 166, 117, 0.12);
  color: #d6f5e5;
}

.alert-danger {
  border-color: rgba(241, 76, 76, 0.6);
  background: rgba(241, 76, 76, 0.12);
  color: #ffd8d8;
}

:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: 10px;
}

.neon-table {
  color: var(--text);
  vertical-align: middle;
}

.neon-table thead th {
  background: var(--surface-2);
  color: var(--muted);
  border-bottom: 1px solid #38393e;
  padding: 12px;
  font-weight: 600;
}

.neon-table thead th a {
  color: inherit;
  text-decoration: none;
}

.neon-table thead th a:hover {
  color: var(--text);
}

.neon-table tbody td {
  padding: var(--table-row-pad-y) 12px;
  border-top: 1px solid #34353a;
}

.neon-table tbody tr:hover {
  background: rgba(87, 124, 176, 0.12);
}

.neon-table tbody tr:last-child td {
  border-bottom: 0;
}

.neon-table a {
  color: var(--brand-2);
  text-decoration: none;
}

.pagination .page-link {
  background: #2a2b30;
  border-color: #3a3b40;
  color: var(--muted);
  box-shadow: var(--shadow-1);
}

.pagination .page-link:hover {
  background: rgba(55, 148, 255, 0.18);
  color: var(--text);
}

.pagination .page-item.disabled .page-link {
  color: rgba(158, 163, 176, 0.7);
  background: #25262a;
  box-shadow: none;
}

.pagination .page-item.active .page-link {
  background: linear-gradient(180deg, #3d8be6, #2e73c1);
  border-color: #3479c3;
  color: var(--text);
}

.reports-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
}

.modal-content {
  background: rgba(36, 37, 42, 0.98);
  color: var(--text);
  border: 1px solid #3a3b40;
  box-shadow: var(--shadow-1), var(--shadow-2);
}

.modal-header,
.modal-footer {
  border-color: #3a3b40;
}

.modal-content .btn-close {
  filter: invert(1) grayscale(100%);
  opacity: 0.8;
}

.modal-content .btn-close:hover {
  opacity: 1;
}

#transferModal,
#writeOffModal,
#addToLocationModal,
#moveModal {
  padding-top: max(env(safe-area-inset-top, 0px), 1rem);
  padding-right: max(env(safe-area-inset-right, 0px), 1rem);
  padding-bottom: max(env(safe-area-inset-bottom, 0px), 1rem);
  padding-left: max(env(safe-area-inset-left, 0px), 1rem);
}

#transferModal .modal-dialog,
#writeOffModal .modal-dialog,
#addToLocationModal .modal-dialog,
#moveModal .modal-dialog {
  margin-left: auto;
  margin-right: auto;
}

@media (max-width: 575.98px) {
  #transferModal .modal-dialog,
  #writeOffModal .modal-dialog,
  #addToLocationModal .modal-dialog,
  #moveModal .modal-dialog {
    max-width: min(560px, calc(100% - 1rem));
    width: 100%;
  }
}

.modal-backdrop.show {
  opacity: 0.75;
  background-color: rgba(8, 10, 18, 0.85);
}

.dropdown-menu {
  background: rgba(36, 37, 42, 0.98);
  border: 1px solid #3a3b40;
  box-shadow: var(--shadow-1);
  color: var(--text);
}

.dropdown-item {
  color: var(--muted);
}

.dropdown-item:hover,
  .dropdown-item:focus {
  color: var(--text);
  background: rgba(55, 148, 255, 0.18);
  }

  .dropdown-divider {
  border-color: #3a3b40;
  }

/* Mobile overflow guards */
@media (max-width: 575.98px) {
  html, body {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
  }
  .neon-body,
  .neon-navbar,
  .neon-navbar .container-fluid,
  .layout-container,
  .layout-row,
  .layout-container > .row,
  main,
  .container-fluid {
    width: 100%;
    max-width: 100vw;
    overflow-x: clip;
  }

  /* neutralize Bootstrap's negative row margins when inside fluid layout */
  .container, .container-fluid, .row {
    max-width: 100vw;
    margin-left: 0;
    margin-right: 0;
  }
  .row { --bs-gutter-x: .75rem; }

  /* allow flex/grid children to shrink instead of forcing overflow */
  .col, [class*="col-"],
  .loc-grid,
  .stock-row,
  .stock-actions,
  .stock-name { min-width: 0; }

  /* buttons should not impose minimum width on small screens */
  .stock-actions .btn { min-width: 0; }

  /* theme switch fits line without widening layout */
  .theme-switch { min-width: 0; width: 100%; }
  .theme-wrapper { width: 100%; }
}

body[data-color-theme="carbon"] {
  --brand: #4fa2ff;
  --brand-2: #6fb7ff;
  --surface-0: #191a1f;
  --surface-1: #202126;
  --surface-2: #25262c;
  --surface-3: #2a2c34;
  --text: #f4f5f7;
  --muted: #9ca1ad;
  --ring: rgba(79, 162, 255, 0.45);
}

body[data-color-theme="light"] {
  --brand: #2444ff;
  --brand-2: #3a60ff;
  --surface-0: #f3f5ff;
  --surface-1: #ffffff;
  --surface-2: #eef1ff;
  --surface-3: #dde4ff;
  --text: #1b1f2d;
  --muted: #5b6483;
  --ring: rgba(36, 68, 255, 0.3);
  --warn: #f08a24;
  --ok: #1fad8a;
  --bad: #e34b4b;
}

body[data-color-theme="light"] .neon-navbar .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(28,34,70,0.82)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 8h22M4 15h22M4 22h22'/%3e%3c/svg%3e");
}
